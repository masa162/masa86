<footer>
  <p>記録と感覚の交差点、<a href="/">中山雑記</a>。</p>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // イベント委譲を使用してアーカイブトグル機能を実装
  document.addEventListener('click', function(e) {
    // 年度トグル
    if (e.target.closest('.archive-year-toggle')) {
      const toggle = e.target.closest('.archive-year-toggle');
      const targetId = toggle.getAttribute('data-target');
      const targetElement = document.getElementById(targetId);
      const arrow = toggle.querySelector('.toggle-arrow');
      
      if (targetElement && arrow) {
        if (targetElement.style.display === 'none') {
          targetElement.style.display = 'block';
          arrow.textContent = '▼';
          arrow.className = 'toggle-arrow open';
        } else {
          targetElement.style.display = 'none';
          arrow.textContent = '▽';
          arrow.className = 'toggle-arrow closed';
        }
      }
    }
    
    // 月トグル
    if (e.target.closest('.archive-month-toggle')) {
      const toggle = e.target.closest('.archive-month-toggle');
      const targetId = toggle.getAttribute('data-target');
      const targetElement = document.getElementById(targetId);
      const arrow = toggle.querySelector('.toggle-arrow');
      
      if (targetElement && arrow) {
        if (targetElement.style.display === 'none') {
          targetElement.style.display = 'block';
          arrow.textContent = '▼';
          arrow.className = 'toggle-arrow open';
        } else {
          targetElement.style.display = 'none';
          arrow.textContent = '▽';
          arrow.className = 'toggle-arrow closed';
        }
      }
    }
  });

  // ハンバーガーメニュー機能
  const hamburgerMenu = document.getElementById('hamburger-menu');
  const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
  const mobileSidebar = document.getElementById('mobile-sidebar');
  const mobileMenuClose = document.getElementById('mobile-menu-close');

  function openMobileMenu() {
    hamburgerMenu.classList.add('active');
    mobileMenuOverlay.classList.add('active');
    mobileSidebar.classList.add('active');
    document.body.style.overflow = 'hidden'; // スクロールを無効化
  }

  function closeMobileMenu() {
    hamburgerMenu.classList.remove('active');
    mobileMenuOverlay.classList.remove('active');
    mobileSidebar.classList.remove('active');
    document.body.style.overflow = ''; // スクロールを有効化
  }

  if (hamburgerMenu) {
    hamburgerMenu.addEventListener('click', openMobileMenu);
  }
  if (mobileMenuClose) {
    mobileMenuClose.addEventListener('click', closeMobileMenu);
  }
  if (mobileMenuOverlay) {
    mobileMenuOverlay.addEventListener('click', closeMobileMenu);
  }

  // ESCキーでメニューを閉じる
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && mobileSidebar && mobileSidebar.classList.contains('active')) {
      closeMobileMenu();
    }
  });
});
</script>
