<footer>
  <p>記録と感覚の交差点、<a href="/">中山雑記</a>。</p>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // 年度トグル機能
  const yearToggles = document.querySelectorAll('.archive-year-toggle');
  yearToggles.forEach(toggle => {
    toggle.addEventListener('click', function() {
      const targetId = this.getAttribute('data-target');
      const targetElement = document.getElementById(targetId);
      const arrow = this.querySelector('.toggle-arrow');
      
      if (targetElement.style.display === 'none') {
        targetElement.style.display = 'block';
        arrow.textContent = '▼';
        arrow.className = 'toggle-arrow open';
      } else {
        targetElement.style.display = 'none';
        arrow.textContent = '▽';
        arrow.className = 'toggle-arrow closed';
      }
    });
  });
  
  // 月トグル機能
  const monthToggles = document.querySelectorAll('.archive-month-toggle');
  monthToggles.forEach(toggle => {
    toggle.addEventListener('click', function() {
      const targetId = this.getAttribute('data-target');
      const targetElement = document.getElementById(targetId);
      const arrow = this.querySelector('.toggle-arrow');
      
      if (targetElement.style.display === 'none') {
        targetElement.style.display = 'block';
        arrow.textContent = '▼';
        arrow.className = 'toggle-arrow open';
      } else {
        targetElement.style.display = 'none';
        arrow.textContent = '▽';
        arrow.className = 'toggle-arrow closed';
      }
    });
  });

  // ハンバーガーメニュー機能
  const hamburgerMenu = document.getElementById('hamburger-menu');
  const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
  const mobileSidebar = document.getElementById('mobile-sidebar');
  const mobileMenuClose = document.getElementById('mobile-menu-close');

  function openMobileMenu() {
    hamburgerMenu.classList.add('active');
    mobileMenuOverlay.classList.add('active');
    mobileSidebar.classList.add('active');
    document.body.style.overflow = 'hidden'; // スクロールを無効化
  }

  function closeMobileMenu() {
    hamburgerMenu.classList.remove('active');
    mobileMenuOverlay.classList.remove('active');
    mobileSidebar.classList.remove('active');
    document.body.style.overflow = ''; // スクロールを有効化
  }

  if (hamburgerMenu) {
    hamburgerMenu.addEventListener('click', openMobileMenu);
  }
  if (mobileMenuClose) {
    mobileMenuClose.addEventListener('click', closeMobileMenu);
  }
  if (mobileMenuOverlay) {
    mobileMenuOverlay.addEventListener('click', closeMobileMenu);
  }

  // ESCキーでメニューを閉じる
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && mobileSidebar && mobileSidebar.classList.contains('active')) {
      closeMobileMenu();
    }
  });
});
</script>
